<ui:composition xmlns="http://www.w3.org/1999/xhtml"
	xmlns:h="http://java.sun.com/jsf/html"
	xmlns:f="http://java.sun.com/jsf/core"
	xmlns:c="http://java.sun.com/jsp/jstl/core"
	xmlns:ui="http://java.sun.com/jsf/facelets"
	template="/layout/template.xhtml">

	<ui:define name="content">

		<f:view>
			<h:form id="dataForm_scheduledworkflow">


				<h1>Schedule Workflow</h1>
				<rich:panel>
					<f:facet name="header">
      				Runtime
       				</f:facet>

					<label for="startdate">ID:</label>
					<h:inputText value="#{scheduleWorkflowBean.item['id']}"
						disabled="#{scheduleWorkflowBean.enabled==true}"/>
					<br />
					
					<label for="startdate">Model Version:</label>
					<h:inputText value="#{scheduleWorkflowBean.item['$modelversion']}"
						/>
					<br />
					
					<label for="startdate">Start:</label>
					<rich:calendar id="startdate"
					datePattern="d.M.yy HH:mm" showApplyButton="true"
						value="#{scheduleWorkflowBean.item['datstart']}">
					</rich:calendar>

					<br />
					<label for="stopdate">Stop :</label>

					<!--  -->
					<rich:calendar id="stopdate"
					datePattern="d.M.yy HH:mm" showApplyButton="true"
						value="#{scheduleWorkflowBean.item['datstop']}">
					</rich:calendar>

				</rich:panel>

				<rich:panel>
					<f:facet name="header">
      				Schedule
       				</f:facet>


					<label>Run every:</label>
					<h:inputText value="#{scheduleWorkflowBean.hours}" size="3"
						id="hoursinput" />
					<label> hour(s) </label>
					<h:inputText value="#{scheduleWorkflowBean.minutes}" size="3"
						id="minutesinput" />
					<label> minutes </label>
				</rich:panel>


				<rich:panel rendered="#{scheduleWorkflowBean.enabled==true}">
					<f:facet name="header">
						<h:outputText value="Status - " />
						<h:outputText rendered="#{scheduleWorkflowBean.enabled==true}"
							value="Enabled" />
						<h:outputText rendered="#{scheduleWorkflowBean.enabled!=true}"
							value="Disabled" />
					</f:facet>
					<h:outputText value="#{scheduleWorkflowBean.item['statusMessage']}" />
					<br />
					<label>NextTimeout: </label>
					<h:outputText value="#{scheduleWorkflowBean.item['nextTimeout']}"
					rendered="#{! empty scheduleWorkflowBean.item['nextTimeout']}"	>
						<f:convertDateTime type="both" dateStyle="full" />
					</h:outputText>
					<br />
					<label>TimeRemaining: &lt;</label>
					<h:outputText
						value="#{scheduleWorkflowBean.item['timeRemaining']/1000/60} minutes" />
				</rich:panel>
				


				<h:commandButton actionListener="#{scheduleWorkflowBean.doReschedule}"
					action="scheduleworkflowlist" 
					rendered="#{scheduleWorkflowBean.enabled}" value="reschedule">
				</h:commandButton>


				<h:commandButton actionListener="#{scheduleWorkflowBean.doEnable}"
					action="scheduleworkflowlist"
					rendered="#{scheduleWorkflowBean.enabled!=true}" value="enable">
				</h:commandButton>

				<h:commandButton actionListener="#{scheduleWorkflowBean.doDisable}"
					action="scheduleworkflowlist"
					rendered="#{scheduleWorkflowBean.enabled==true}" value="disable">
				</h:commandButton>

			</h:form>
		</f:view>
	</ui:define>
</ui:composition>



