<ui:composition xmlns="http://www.w3.org/1999/xhtml"
	xmlns:h="http://java.sun.com/jsf/html"
	xmlns:f="http://java.sun.com/jsf/core"
	xmlns:c="http://java.sun.com/jsp/jstl/core"
	xmlns:ui="http://java.sun.com/jsf/facelets"
	template="/layout/template.xhtml">

	<ui:define name="content">
		<f:view>
			<h:form id="dataForm_listscheduledworkflow">


				<h1>Schedule Workflow List</h1>
				<rich:panel>
					<f:facet name="header">
      				Running Workflow Managers:
       				</f:facet>

					<h:commandButton actionListener="#{scheduleWorkflowBean.doCreate}"
						action="scheduleworkflow" value="create new">
					</h:commandButton>

					<rich:dataTable id="timer_datatable_id" columns="7"
						value="#{scheduleWorkflowBean.timers}" rows="10" var="record">
						<f:facet name="caption">
							<h:outputText value="Created" />
						</f:facet>

						<rich:column>
							<f:facet name="header">
								<h:outputText value="created" />
							</f:facet>
							<h:graphicImage url="/layout/img/green.gif" />
							
							<h:outputText value="#{record.item['$created']}" >
							<f:convertDateTime type="both" dateStyle="medium" />
							</h:outputText>
						</rich:column>

						<rich:column>
							<f:facet name="header">
								<h:outputText value="ID" />
							</f:facet>
							<h:commandLink action="scheduleworkflow"
								actionListener="#{scheduleWorkflowBean.loadTimer}"
								value="#{record.item['id']}">
								<f:param name="id" value="#{record.item['id']}" />
							</h:commandLink>
						</rich:column>


						<rich:column>
							<f:facet name="header">
								<h:outputText value="Model" />
							</f:facet>
							<h:outputText value="#{record.item['$modelversion']}" />
						</rich:column>
						
						<rich:column>
							<f:facet name="header">
								<h:outputText value="Status" />
							</f:facet>
							<h:outputText value="#{record.item['statusmessage']}" />
						</rich:column>

						<rich:column>
							<f:facet name="header">
								<h:outputText value="next timeout" />
							</f:facet>
							<h:outputText value="#{record.item['nexttimeout']}">
								<f:convertDateTime type="both" dateStyle="medium"
									timeStyle="medium" />
							</h:outputText>
						</rich:column>



						<rich:column>
							<f:facet name="header">
								<h:outputText value="Interval" />
							</f:facet>
							<h:outputText
								value="#{record.item['numinterval']/1000/60} minutes" />
						</rich:column>



						<rich:column>
							<f:facet name="header">
								<h:outputText value="Stop" />
							</f:facet>
							<h:outputText value="#{record.item['datstop']}">
								<f:convertDateTime type="both" dateStyle="medium"
									timeStyle="medium" />
							</h:outputText>
						</rich:column>
					</rich:dataTable>



				</rich:panel>

			</h:form>
		</f:view>
	</ui:define>
</ui:composition>

