<div class="row imixs-view">

	<!-- Status message -->
	<div id="imixs-status" data-ben-controller="restServiceController">
		<div class="ui-state-highlight ui-corner-all">
			<p>
				<span class="ui-icon ui-icon-transferthick-e-w"
					style="float: left; margin-right: .3em; margin-top: .2em;"></span>
				<span data-ben-model="getStatus()"></span>
			</p>
		</div>
	</div>



	<h1>AdminP:</h1>
	<div>

		<div class="" id="adminp-formpanel">

			<div class="imixs-tabs" data-ben-controller="adminPJobController">
				<ul>
					<li><a href="#tab-1">Rebuild Index</a></li>
					<li><a href="#tab-2">Rename User</a></li>
					<li><a href="#tab-3">Upgrade</a></li>
					<li><a href="#tab-4">Migration 3.x</a></li>
				</ul>

				<!-- Update Index -->
				<div id="tab-1">

					<p>This job rebuilds the <a href="http://www.imixs.org/doc/engine/luceneservice.html" target="imixsorg">Lucene fulltext-index</a>. Rebuilding the
						index may be necessary after a database restore, or in cases where
						the index has been deleted or corrupted. Rebuilding the index does
						not change any data. You can set optional filter criteria to limit
						the selection of the affected data.</p>
					<hr />

					<div class="row nested">
						<div class="col-4">
							<dl>
								<dt>Filter by creation date:</dt>
								<dd>
									<input type="text" class="imixs-date"
										data-ben-model="datfrom_reindex" /> - <input type="text"
										class="imixs-date" data-ben-model="datto_reindex"></input>
								</dd>
							</dl>
						</div>
						<div class="col-4">
							<dl>
								<dt>Filter by document type:</dt>
								<dd>
									<textarea placeholder="comma separated list of document types"
										data-ben-model="typelist_reindex"></textarea>
								</dd>
							</dl>

						</div>
						<div class="col-4">
							<dl>
								<dt>Blocksize:</dt>
								<dd>
									<input type="text" placeholder="500"
										data-ben-model="numblocksize_reindex"></input>
								</dd>
							</dl>
							<dl>
								<dt>Interval in minutes:</dt>
								<dd>
									<input type="text" placeholder="1"
										data-ben-model="numinterval_reindex"></input>
								</dd>
							</dl>
						</div>

					</div>

					<input type="button" value="Start Job"
						onclick="adminclient.adminPJobController.createReindexJob();"
						class="btn" />

				</div>



				<!-- Rename -->
				<div id="tab-2" class="">
					<p>
						This job updates the <a
							href="http://www.imixs.org/doc/engine/acl.html" target="imixsorg">access
							control list (ACL)</a> and permissions data of existing workitems.
						Data will only be changed in cases the id <i>"From User-ID"</i> is
						part of an workitem. You can set optional filter criteria to limit
						the selection of the affected data.
					</p>
					<hr />

					<div class="row nested">


						<div class="col-4">
							<dl>
								<dt>Filter by creation date:</dt>
								<dd>
									<input type="text" class="imixs-date"
										data-ben-model="datfrom_renameuser" /> - <input type="text"
										class="imixs-date" data-ben-model="datto_renameuser"></input>
								</dd>
							</dl>
						</div>

						<div class="col-4">
							<dl>
								<dt>Filter by document type:</dt>
								<dd>
									<textarea placeholder="comma separated list of document types"
										data-ben-model="typelist_renameuser"></textarea>
								</dd>
							</dl>

						</div>



						<div class="col-4">
							<dl>
								<dt>Blocksize:</dt>
								<dd>
									<input type="text" placeholder="100"
										data-ben-model="numblocksize_renameuser"></input>
								</dd>
							</dl>
							<dl>
								<dt>Interval in minutes:</dt>
								<dd>
									<input type="text" placeholder="1"
										data-ben-model="numinterval_renameuser"></input>
								</dd>
							</dl>
						</div>

					</div>


					<div class="row nested">
						<div class="col-4">
							<dl>
								<dt>From User-ID:</dt>
								<dd>
									<input type="text" placeholder="enter userid"
										data-ben-model="namfrom"></input>
								</dd>
							</dl>
						</div>
						<div class="col-4">
							<dl>
								<dt>To User-ID:</dt>
								<dd>
									<input type="text" placeholder="enter userid"
										data-ben-model="namto"></input>
								</dd>
							</dl>
						</div>
						<div class="col-4">
							<dl>
								<dt>Full Replace:</dt>
								<dd>
									<input type="checkbox" id="renamefullreplace" name="true"
										value="true">YES
								</dd>
							</dl>
						</div>
					</div>

					<input type="button" value="Start Job"
						onclick="adminclient.adminPJobController.createRenameUserJob();"
						class="btn" />



				</div>




				<!-- Upgrade Workitems -->
				<div id="tab-3">
					<p>
						This job upgrades the <a
							href="http://www.imixs.org/doc/quickstart/workitem.html#Workflow_data"
							target="imixsorg"> workflow data</a> of existing workitems. Data
						will only be changed in cases a workitem was not processed by the
						current version of the Imixs-Workfow engine used in this instance.
						You can set optional filter criteria to limit the selection of the
						affected data.
					</p>
					<hr />


					<div class="row nested">
						<div class="col-4">
							<dl>
								<dt>Filter by creation date:</dt>
								<dd>
									<input type="text" class="imixs-date"
										data-ben-model="datfrom_upgrade"></input> - <input type="text"
										class="imixs-date" data-ben-model="datto_upgrade"></input>
								</dd>
							</dl>
						</div>
						<div class="col-4">
							<dl>
								<dt>Filter by document type:</dt>
								<dd>
									<textarea placeholder="comma separated list of document types"
										data-ben-model="typelist_upgrade"></textarea>
								</dd>
							</dl>

						</div>
						<div class="col-4">
							<dl>
								<dt>Blocksize:</dt>
								<dd>
									<input type="text" placeholder="100"
										data-ben-model="numblocksize_upgrade"></input>
								</dd>
							</dl>
							<dl>
								<dt>Interval in minutes:</dt>
								<dd>
									<input type="text" placeholder="1"
										data-ben-model="numinterval_upgrade"></input>
								</dd>
							</dl>
						</div>

					</div>

					<input type="button" value="Start Job"
						onclick="adminclient.adminPJobController.createUpgradeJob();"
						class="btn" />

				</div>




				<!--  Migration -->
				<div id="tab-4">
					<p>This job can be used to migrate an existing
						Imixs-Workflow Instance from version 3.x to version 4.0.</p>
						<hr />
					<div class="row nested">
						<div class="col-4">
							<dl>
								<dt>Index:</dt>
								<dd>
									<input type="text" placeholder="0"
										data-ben-model="numindex_migration"></input>
								</dd>
							</dl>
							<dl>
								<dt>Block Size:</dt>
								<dd>
									<input type="text" placeholder="100"
										data-ben-model="numblocksize_migration"></input>
								</dd>
							</dl>
							<dl>
								<dt>Interval in minutes:</dt>
								<dd>
									<input type="text" placeholder="1"
										data-ben-model="numinterval_migration"></input>
								</dd>
							</dl>
						</div>

					</div>

					<input type="button" value="Start Job"
						onclick="adminclient.adminPJobController.createMigrationJob();"
						class="btn" />
				</div>
			</div>




			<!-- Error message -->
			<div id="imixs-error" style="">
				<div class="ui-state-error ui-corner-all">
					<p>
						<span class="ui-icon ui-icon-alert"
							style="float: left; margin-right: .3em;"></span> <strong>Error:</strong>
					</p>
					<p id="error-message" />
				</div>
			</div>


			<!--  Job list -->

			<div data-ben-controller="adminPViewController">
				<table>
					<thead>
						<tr>
							<th>ID</th>
							<th>Type</th>
							<th>Created</th>
							<th>Modified</th>
							<th>Status</th>
							<th>Processed</th>
							<th>Updates</th>
							<th>Action</th>
						</tr>
					</thead>
					<tbody data-ben-foreach="jobs as adminclient.Workitem">
						<tr>
							<td><a href="javascript:;"
								onclick="adminclient.workitemController.loadWorkitem(this)">
									<span data-ben-model="getItem('$uniqueid')" />
							</a> (<span data-ben-model="getItem('$version')" />)</td>

							<td><span data-ben-model="getItem('job')" /></td>

							<td><span data-ben-model="getItem('$created')" /></td>

							<td><span data-ben-model="getItem('$modified')" /></td>

							<td><span data-ben-model="getItem('$workflowstatus')" /></td>

							<td><span data-ben-model="getItem('numprocessed')" /></td>

							<td><span data-ben-model="getItem('numupdates')" /></td>

							<td><input type="button" value="Delete"
								onclick="adminclient.adminPViewController.deleteJob({context:this,callback:adminclient.adminPViewController.loadJobs})" /></td>

						</tr>
					</tbody>
				</table>
			</div>

		</div>
	</div>