<f:subview xmlns="http://www.w3.org/1999/xhtml"
	xmlns:f="http://java.sun.com/jsf/core"
	xmlns:h="http://java.sun.com/jsf/html"
	xmlns:c="http://java.sun.com/jsp/jstl/core"
	xmlns:ui="http://java.sun.com/jsf/facelets">


	<script type="text/javascript">
		// refresh data table style after update 
		function refreshTable(e) {
			if (e.status == 'success') {
				$(".imixsdatatable").styleTable();
			}
			if (e.status == 'complete') {
				// alert("b");
			}
		}
	</script>

	<h3>Search Result
		#{entityController.row}...#{entityController.row+entityController.count}</h3>

	<h:panelGroup id="search_result_table">
		<h:dataTable class="imixsdatatable"
			value="#{entityController.entities}" var="entity">


			<h:column>
				<f:facet name="header">
					<h:outputText value="ID" />
				</f:facet>
				<h:commandLink action="#{entityController.selectEntityAction(entity)}">
					<h:outputText style="text-decoratiooDn: underline;"
						value="#{entity.item['$uniqueid']}  (#{entity.item['$version']})" />
				</h:commandLink>
			</h:column>

			<h:column>
				<f:facet name="header">
					<h:outputText value="Created" />
				</f:facet>
				<h:outputText value="#{entity.item['$created']}">
					<f:convertDateTime type="both" dateStyle="short" timeStyle="medium" />
				</h:outputText>
				<h:outputText value=" #{global.by} #{entity.item['namcreator']}" />
			</h:column>

			<h:column>
				<f:facet name="header">
					<h:outputText value="Modified" />
				</f:facet>
				<h:outputText value="#{entity.item['$modified']}">
					<f:convertDateTime type="both" dateStyle="short" timeStyle="medium" />
				</h:outputText>
				<h:outputText
					value=" #{global.by} #{entity.item['namcurrentEditor']}" />
			</h:column>


			<h:column>
				<f:facet name="header">
					<h:outputText value="Summary" />
				</f:facet>
				<!--  display txtworkflowsummary or txtname if provided -->
				<h:outputText value="#{entity.item['txtworkflowsummary']}" />
				<h:outputText value="#{entity.item['txtname']}"
					rendered="#{empty entity.item['txtworkflowsummary']}" />

			</h:column>

			<h:column>
				<f:facet name="header">
					<h:outputText value="Status" />
				</f:facet>
				<h:outputText value="#{entity.item['txtworkflowstatus']}" />
			</h:column>

			<h:column
				rendered="#{aclController['org.imixs.ACCESSLEVEL.MANAGERACCESS']}">
				<f:facet name="header">
					<h:outputText value="" />
				</f:facet>

				<h:commandLink title="delete entity"
					onclick="return confirm('Delete entity?');"
					action="#{entityController.deleteEntityAction(entity)}">
					<h:graphicImage url="/layout/img/remove.gif"
						style="border: 0 none;" />

					<f:ajax render=":#{component.parent.parent.parent.clientId}"
						onevent="refreshTable" />
				</h:commandLink>

			</h:column>


		</h:dataTable>
	</h:panelGroup>
	<h:commandButton actionListener="#{entityController.loadPrev}"
		disabled="#{entityController.row==0}" value="prev">
	</h:commandButton>
	<h:commandButton actionListener="#{entityController.loadNext}"
		disabled="#{entityController.endOfList or (! entityController.serviceLoaded)}"
		value="next">
	</h:commandButton>





</f:subview>
